apiVersion: langop.io/v1alpha1
kind: LanguageTool
metadata:
  name: <%= name %>
  namespace: <%= namespace %>
spec:
  type: mcp
  image: git.theryans.io/langop/github-tool:latest
  imagePullPolicy: Always
  imagePullSecrets:
    - name: registry-credentials
  deploymentMode: <%= deployment_mode || 'service' %>
  port: 8080
  replicas: <%= replicas || 1 %>

  <% if auth_secret %>
  envFrom:
    - secretRef:
        name: <%= auth_secret %>
  <% end %>

  resources:
    requests:
      cpu: 100m
      memory: 128Mi
    limits:
      cpu: 500m
      memory: 512Mi

  egress:
    - description: Allow HTTPS to GitHub
      to:
        dns:
          - "*.github.com"
          - "github.com"
          - "api.github.com"
      ports:
        - port: 443
          protocol: TCP
